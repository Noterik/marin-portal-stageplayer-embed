!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e){t.exports=Object.freeze({STAGE_ENDPOINT:"stage",DATA_ENDPOINT:"data",SBF_DATA_ENDPOINT:"sbf-data",CLIENT_HOST:"0.0.0.0",CLIENT_PORT:3e3})},function(t,e,n){"use strict";e.decode=e.parse=n(9),e.encode=e.stringify=n(10)},,function(t,e,n){"use strict";var r=n(5),o=n(8);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=g,e.resolve=function(t,e){return g(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?g(t,!1,!0).resolveObject(e):e},e.format=function(t){o.isString(t)&&(t=g(t));return t instanceof i?t.format():i.prototype.format.call(t)},e.Url=i;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),h=["'"].concat(c),l=["%","/","?",";","#"].concat(h),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=n(1);function g(t,e,n){if(t&&o.isObject(t)&&t instanceof i)return t;var r=new i;return r.parse(t,e,n),r}i.prototype.parse=function(t,e,n){if(!o.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),a=-1!==i&&i<t.indexOf("#")?"?":"#",c=t.split(a);c[0]=c[0].replace(/\\/g,"/");var g=t=c.join(a);if(g=g.trim(),!n&&1===t.split("#").length){var _=u.exec(g);if(_)return this.path=g,this.href=g,this.pathname=_[1],_[2]?(this.search=_[2],this.query=e?b.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=s.exec(g);if(w){var O=(w=w[0]).toLowerCase();this.protocol=O,g=g.substr(w.length)}if(n||w||g.match(/^\/\/[^@\/]+@[^@\/]+/)){var j="//"===g.substr(0,2);!j||w&&y[w]||(g=g.substr(2),this.slashes=!0)}if(!y[w]&&(j||w&&!m[w])){for(var P,C,x=-1,I=0;I<f.length;I++){-1!==(A=g.indexOf(f[I]))&&(-1===x||A<x)&&(x=A)}-1!==(C=-1===x?g.lastIndexOf("@"):g.lastIndexOf("@",x))&&(P=g.slice(0,C),g=g.slice(C+1),this.auth=decodeURIComponent(P)),x=-1;for(I=0;I<l.length;I++){var A;-1!==(A=g.indexOf(l[I]))&&(-1===x||A<x)&&(x=A)}-1===x&&(x=g.length),this.host=g.slice(0,x),g=g.slice(x),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var E=this.hostname.split(/\./),S=(I=0,E.length);I<S;I++){var q=E[I];if(q&&!q.match(p)){for(var N="",D=0,k=q.length;D<k;D++)q.charCodeAt(D)>127?N+="x":N+=q[D];if(!N.match(p)){var F=E.slice(0,I),$=E.slice(I+1),L=q.match(d);L&&(F.push(L[1]),$.unshift(L[2])),$.length&&(g="/"+$.join(".")+g),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=r.toASCII(this.hostname));var R=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+R,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==g[0]&&(g="/"+g))}if(!v[O])for(I=0,S=h.length;I<S;I++){var U=h[I];if(-1!==g.indexOf(U)){var M=encodeURIComponent(U);M===U&&(M=escape(U)),g=g.split(U).join(M)}}var H=g.indexOf("#");-1!==H&&(this.hash=g.substr(H),g=g.slice(0,H));var X=g.indexOf("?");if(-1!==X?(this.search=g.substr(X),this.query=g.substr(X+1),e&&(this.query=b.parse(this.query)),g=g.slice(0,X)):e&&(this.search="",this.query={}),g&&(this.pathname=g),m[O]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){R=this.pathname||"";var B=this.search||"";this.path=R+B}return this.href=this.format(),this},i.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,s="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(s=b.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||m[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+i+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+r},i.prototype.resolve=function(t){return this.resolveObject(g(t,!1,!0)).format()},i.prototype.resolveObject=function(t){if(o.isString(t)){var e=new i;e.parse(t,!1,!0),t=e}for(var n=new i,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),c=0;c<u.length;c++){var h=u[c];"protocol"!==h&&(n[h]=t[h])}return m[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!m[t.protocol]){for(var l=Object.keys(t),f=0;f<l.length;f++){var p=l[f];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||y[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var v=n.pathname||"",b=n.search||"";n.path=v+b}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),_=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=_||g||n.host&&t.pathname,O=w,j=n.pathname&&n.pathname.split("/")||[],P=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!m[n.protocol]);if(P&&(n.hostname="",n.port=null,n.host&&(""===j[0]?j[0]=n.host:j.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),w=w&&(""===d[0]||""===j[0])),_)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,j=d;else if(d.length)j||(j=[]),j.pop(),j=j.concat(d),n.search=t.search,n.query=t.query;else if(!o.isNullOrUndefined(t.search)){if(P)n.hostname=n.host=j.shift(),(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift());return n.search=t.search,n.query=t.query,o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!j.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var C=j.slice(-1)[0],x=(n.host||t.host||j.length>1)&&("."===C||".."===C)||""===C,I=0,A=j.length;A>=0;A--)"."===(C=j[A])?j.splice(A,1):".."===C?(j.splice(A,1),I++):I&&(j.splice(A,1),I--);if(!w&&!O)for(;I--;I)j.unshift("..");!w||""===j[0]||j[0]&&"/"===j[0].charAt(0)||j.unshift(""),x&&"/"!==j.join("/").substr(-1)&&j.push("");var T,E=""===j[0]||j[0]&&"/"===j[0].charAt(0);P&&(n.hostname=n.host=E?"":j.length?j.shift():"",(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift()));return(w=w||n.host&&j.length)&&!E&&j.unshift(""),j.length?n.pathname=j.join("/"):(n.pathname=null,n.path=null),o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){t.exports=n(17)},function(t,e,n){(function(t,r){var o;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(i){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var a,u=2147483647,c=36,h=1,l=26,f=38,p=700,d=72,v=128,y="-",m=/^xn--/,b=/[^\x20-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=c-h,O=Math.floor,j=String.fromCharCode;function P(t){throw new RangeError(_[t])}function C(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function x(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+C((t=t.replace(g,".")).split("."),e).join(".")}function I(t){for(var e,n,r=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?56320==(64512&(n=t.charCodeAt(o++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--):r.push(e);return r}function A(t){return C(t,function(t){var e="";return t>65535&&(e+=j((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=j(t)}).join("")}function T(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function E(t,e,n){var r=0;for(t=n?O(t/p):t>>1,t+=O(t/e);t>w*l>>1;r+=c)t=O(t/w);return O(r+(w+1)*t/(t+f))}function S(t){var e,n,r,o,i,s,a,f,p,m,b,g=[],_=t.length,w=0,j=v,C=d;for((n=t.lastIndexOf(y))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&P("not-basic"),g.push(t.charCodeAt(r));for(o=n>0?n+1:0;o<_;){for(i=w,s=1,a=c;o>=_&&P("invalid-input"),((f=(b=t.charCodeAt(o++))-48<10?b-22:b-65<26?b-65:b-97<26?b-97:c)>=c||f>O((u-w)/s))&&P("overflow"),w+=f*s,!(f<(p=a<=C?h:a>=C+l?l:a-C));a+=c)s>O(u/(m=c-p))&&P("overflow"),s*=m;C=E(w-i,e=g.length+1,0==i),O(w/e)>u-j&&P("overflow"),j+=O(w/e),w%=e,g.splice(w++,0,j)}return A(g)}function q(t){var e,n,r,o,i,s,a,f,p,m,b,g,_,w,C,x=[];for(g=(t=I(t)).length,e=v,n=0,i=d,s=0;s<g;++s)(b=t[s])<128&&x.push(j(b));for(r=o=x.length,o&&x.push(y);r<g;){for(a=u,s=0;s<g;++s)(b=t[s])>=e&&b<a&&(a=b);for(a-e>O((u-n)/(_=r+1))&&P("overflow"),n+=(a-e)*_,e=a,s=0;s<g;++s)if((b=t[s])<e&&++n>u&&P("overflow"),b==e){for(f=n,p=c;!(f<(m=p<=i?h:p>=i+l?l:p-i));p+=c)C=f-m,w=c-m,x.push(j(T(m+C%w,0))),f=O(C/w);x.push(j(T(f,0))),i=E(n,_,r==o),n=0,++r}++n,++e}return x.join("")}a={version:"1.4.1",ucs2:{decode:I,encode:A},decode:S,encode:q,toASCII:function(t){return x(t,function(t){return b.test(t)?"xn--"+q(t):t})},toUnicode:function(t){return x(t,function(t){return m.test(t)?S(t.slice(4).toLowerCase()):t})}},void 0===(o=function(){return a}.call(e,n,e,t))||(t.exports=o)}()}).call(this,n(6)(t),n(7))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,i){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var h=0;h<c;++h){var l,f,p,d,v=t[h].replace(a,"%20"),y=v.indexOf(n);y>=0?(l=v.substr(0,y),f=v.substr(y+1)):(l=v,f=""),p=decodeURIComponent(l),d=decodeURIComponent(f),r(s,p)?o(s[p])?s[p].push(d):s[p]=[s[p],d]:s[p]=d}return s};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?i(s(t),function(s){var a=encodeURIComponent(r(s))+n;return o(t[s])?i(t[s],function(t){return a+encodeURIComponent(r(t))}).join(e):a+encodeURIComponent(r(t[s]))}).join(e):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function i(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(12),o=n(13),i=n(15),s=()=>{},a=new o.TimeoutError;e.default=class extends r{constructor(t){if(super(),Object.defineProperty(this,"_carryoverConcurrencyCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isIntervalIgnored",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_intervalCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_intervalCap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_interval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_intervalEnd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_intervalId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_timeoutId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_queueClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pendingCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_concurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isPaused",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_resolveEmpty",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"_resolveIdle",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"_timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_throwOnTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"==typeof(t=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:i.default},t)).intervalCap&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${t.intervalCap}\` (${typeof t.intervalCap})`);if(void 0===t.interval||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${t.interval}\` (${typeof t.interval})`);this._carryoverConcurrencyCount=t.carryoverConcurrencyCount,this._isIntervalIgnored=t.intervalCap===1/0||0===t.interval,this._intervalCap=t.intervalCap,this._interval=t.interval,this._queue=new t.queueClass,this._queueClass=t.queueClass,this.concurrency=t.concurrency,this._timeout=t.timeout,this._throwOnTimeout=!0===t.throwOnTimeout,this._isPaused=!1===t.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother()}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=s,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=s)}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const t=Date.now();if(void 0===this._intervalId){const e=this._intervalEnd-t;if(!(e<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},e)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const t=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother)return this.emit("active"),this._queue.dequeue()(),t&&this._initializeIntervalIfNeeded(),!0}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(t){if(!("number"==typeof t&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this._concurrency=t,this._processQueue()}async add(t,e={}){return new Promise((n,r)=>{this._queue.enqueue(async()=>{this._pendingCount++,this._intervalCount++;try{const i=void 0===this._timeout&&void 0===e.timeout?t():o.default(Promise.resolve(t()),void 0===e.timeout?this._timeout:e.timeout,()=>{(void 0===e.throwOnTimeout?this._throwOnTimeout:e.throwOnTimeout)&&r(a)});n(await i)}catch(t){r(t)}this._next()},e),this._tryToStartAnother()})}async addAll(t,e){return Promise.all(t.map(async t=>this.add(t,e)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(t=>{const e=this._resolveEmpty;this._resolveEmpty=()=>{e(),t()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(t=>{const e=this._resolveIdle;this._resolveIdle=()=>{e(),t()}})}get size(){return this._queue.size}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}set timeout(t){this._timeout=t}get timeout(){return this._timeout}}},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function i(){}function s(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function a(t,e,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new s(n,r||t,i),u=o?o+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],a]:t._events[u].push(a):(t._events[u]=a,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function c(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),c.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},c.prototype.listeners=function(t){var e=o?o+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,s=new Array(i);r<i;r++)s[r]=n[r].fn;return s},c.prototype.listenerCount=function(t){var e=o?o+t:t,n=this._events[e];return n?n.fn?1:n.length:0},c.prototype.emit=function(t,e,n,r,i,s){var a=o?o+t:t;if(!this._events[a])return!1;var u,c,h=this._events[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,n),!0;case 4:return h.fn.call(h.context,e,n,r),!0;case 5:return h.fn.call(h.context,e,n,r,i),!0;case 6:return h.fn.call(h.context,e,n,r,i,s),!0}for(c=1,u=new Array(l-1);c<l;c++)u[c-1]=arguments[c];h.fn.apply(h.context,u)}else{var f,p=h.length;for(c=0;c<p;c++)switch(h[c].once&&this.removeListener(t,h[c].fn,void 0,!0),l){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,e);break;case 3:h[c].fn.call(h[c].context,e,n);break;case 4:h[c].fn.call(h[c].context,e,n,r);break;default:if(!u)for(f=1,u=new Array(l-1);f<l;f++)u[f-1]=arguments[f];h[c].fn.apply(h[c].context,u)}}return!0},c.prototype.on=function(t,e,n){return a(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return a(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,n,r){var i=o?o+t:t;if(!this._events[i])return this;if(!e)return u(this,i),this;var s=this._events[i];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||u(this,i);else{for(var a=0,c=[],h=s.length;a<h;a++)(s[a].fn!==e||r&&!s[a].once||n&&s[a].context!==n)&&c.push(s[a]);c.length?this._events[i]=1===c.length?c[0]:c:u(this,i)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=o?o+t:t,this._events[e]&&u(this,e)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=o,c.EventEmitter=c,t.exports=c},function(t,e,n){"use strict";const r=n(14);class o extends Error{constructor(t){super(t),this.name="TimeoutError"}}const i=(t,e,n)=>new Promise((i,s)=>{if("number"!=typeof e||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0)return void i(t);const a=setTimeout(()=>{if("function"==typeof n){try{i(n())}catch(t){s(t)}return}const r=n instanceof Error?n:new o("string"==typeof n?n:`Promise timed out after ${e} milliseconds`);"function"==typeof t.cancel&&t.cancel(),s(r)},e);r(t.then(i,s),()=>{clearTimeout(a)})});t.exports=i,t.exports.default=i,t.exports.TimeoutError=o},function(t,e,n){"use strict";t.exports=(t,e)=>(e=e||(()=>{}),t.then(t=>new Promise(t=>{t(e())}).then(()=>t),t=>new Promise(t=>{t(e())}).then(()=>{throw t})))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(16);e.default=class{constructor(){Object.defineProperty(this,"_queue",{enumerable:!0,configurable:!0,writable:!0,value:[]})}enqueue(t,e){const n={priority:(e=Object.assign({priority:0},e)).priority,run:t};if(this.size&&this._queue[this.size-1].priority>=e.priority)return void this._queue.push(n);const o=r.default(this._queue,n,(t,e)=>e.priority-t.priority);this._queue.splice(o,0,n)}dequeue(){const t=this._queue.shift();return t&&t.run}get size(){return this._queue.length}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){let r=0,o=t.length;for(;o>0;){const i=o/2|0;let s=r+i;n(t[s],e)<=0?(r=++s,o-=i+1):o=i}return r}},function(t,e,n){"use strict";n.r(e);var r=n(3),o=n.n(r),i=n(1),s=n.n(i);function a(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function u(t){return function e(n){return 0===arguments.length||a(n)?e:t.apply(this,arguments)}}function c(t){return function e(n,r){switch(arguments.length){case 0:return e;case 1:return a(n)?e:u(function(e){return t(n,e)});default:return a(n)&&a(r)?e:a(n)?u(function(e){return t(e,r)}):a(r)?u(function(e){return t(n,e)}):t(n,r)}}}var h=c(function(t,e){return null==e||e!=e?t:e}),l=c(function(t,e){for(var n=e,r=0;r<t.length;){if(null==n)return;n=n[t[r]],r+=1}return n});function f(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,o){return e.apply(this,arguments)};case 5:return function(t,n,r,o,i){return e.apply(this,arguments)};case 6:return function(t,n,r,o,i,s){return e.apply(this,arguments)};case 7:return function(t,n,r,o,i,s,a){return e.apply(this,arguments)};case 8:return function(t,n,r,o,i,s,a,u){return e.apply(this,arguments)};case 9:return function(t,n,r,o,i,s,a,u,c){return e.apply(this,arguments)};case 10:return function(t,n,r,o,i,s,a,u,c,h){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}var p=c(function(t,e){return 1===t?u(e):f(t,function t(e,n,r){return function(){for(var o=[],i=0,s=e,u=0;u<n.length||i<arguments.length;){var c;u<n.length&&(!a(n[u])||i>=arguments.length)?c=n[u]:(c=arguments[i],i+=1),o[u]=c,a(c)||(s-=1),u+=1}return s<=0?r.apply(this,o):f(s,t(e,o,r))}}(t,[],e))}),d=u(function(t){return p(t.length,t)});function v(t,e){return function(){return e.call(this,t.apply(this,arguments))}}function y(t){return function e(n,r,o){switch(arguments.length){case 0:return e;case 1:return a(n)?e:c(function(e,r){return t(n,e,r)});case 2:return a(n)&&a(r)?e:a(n)?c(function(e,n){return t(e,r,n)}):a(r)?c(function(e,r){return t(n,e,r)}):u(function(e){return t(n,r,e)});default:return a(n)&&a(r)&&a(o)?e:a(n)&&a(r)?c(function(e,n){return t(e,n,o)}):a(n)&&a(o)?c(function(e,n){return t(e,r,n)}):a(r)&&a(o)?c(function(e,r){return t(n,e,r)}):a(n)?u(function(e){return t(e,r,o)}):a(r)?u(function(e){return t(n,e,o)}):a(o)?u(function(e){return t(n,r,e)}):t(n,r,o)}}}var m=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};var b=u(function(t){return!!m(t)||!!t&&("object"==typeof t&&(!function(t){return"[object String]"===Object.prototype.toString.call(t)}(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))}),g=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},t}();var _=c(function(t,e){return f(t.length,function(){return t.apply(e,arguments)})});function w(t,e,n){for(var r=n.next();!r.done;){if((e=t["@@transducer/step"](e,r.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=n.next()}return t["@@transducer/result"](e)}function O(t,e,n,r){return t["@@transducer/result"](n[r](_(t["@@transducer/step"],t),e))}var j="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function P(t,e,n){if("function"==typeof t&&(t=function(t){return new g(t)}(t)),b(n))return function(t,e,n){for(var r=0,o=n.length;r<o;){if((e=t["@@transducer/step"](e,n[r]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return t["@@transducer/result"](e)}(t,e,n);if("function"==typeof n["fantasy-land/reduce"])return O(t,e,n,"fantasy-land/reduce");if(null!=n[j])return w(t,e,n[j]());if("function"==typeof n.next)return w(t,e,n);if("function"==typeof n.reduce)return O(t,e,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var C=y(P);function x(t,e){return function(){var n=arguments.length;if(0===n)return e();var r=arguments[n-1];return m(r)||"function"!=typeof r[t]?e.apply(this,arguments):r[t].apply(r,Array.prototype.slice.call(arguments,0,n-1))}}var I=u(x("tail",y(x("slice",function(t,e,n){return Array.prototype.slice.call(n,t,e)}))(1,1/0)));function A(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return f(arguments[0].length,C(v,arguments[0],I(arguments)))}var T=y(function(t,e,n){return t(n)?e(n):n}),E=c(function(t,e){return l([t],e)}),S=u(function(t){return function(){return t}}),q=y(function(t,e,n){var r={};for(var o in n)r[o]=n[o];return r[t]=e,r});function N(t){return null!=t&&"function"==typeof t["@@transducer/step"]}function D(t,e,n){return function(){if(0===arguments.length)return n();var r=Array.prototype.slice.call(arguments,0),o=r.pop();if(!m(o)){for(var i=0;i<t.length;){if("function"==typeof o[t[i]])return o[t[i]].apply(o,r);i+=1}if(N(o)){var s=e.apply(null,r);return s(o)}}return n.apply(this,arguments)}}var k=function(){return this.xf["@@transducer/init"]()},F=function(t){return this.xf["@@transducer/result"](t)},$=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=k,t.prototype["@@transducer/result"]=F,t.prototype["@@transducer/step"]=function(t,e){return this.xf["@@transducer/step"](t,this.f(e))},t}(),L=c(function(t,e){return new $(t,e)});function R(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var z=Object.prototype.toString,U=function(){return"[object Arguments]"===z.call(arguments)?function(t){return"[object Arguments]"===z.call(t)}:function(t){return R("callee",t)}}(),M=!{toString:null}.propertyIsEnumerable("toString"),H=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],X=function(){return arguments.propertyIsEnumerable("length")}(),B=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1},G="function"!=typeof Object.keys||X?u(function(t){if(Object(t)!==t)return[];var e,n,r=[],o=X&&U(t);for(e in t)!R(e,t)||o&&"length"===e||(r[r.length]=e);if(M)for(n=H.length-1;n>=0;)R(e=H[n],t)&&!B(r,e)&&(r[r.length]=e),n-=1;return r}):u(function(t){return Object(t)!==t?[]:Object.keys(t)}),J=c(D(["fantasy-land/map","map"],L,function(t,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return p(e.length,function(){return t.call(this,e.apply(this,arguments))});case"[object Object]":return P(function(n,r){return n[r]=t(e[r]),n},{},G(e));default:return function(t,e){for(var n=0,r=e.length,o=Array(r);n<r;)o[n]=t(e[n]),n+=1;return o}(t,e)}}));var Q="function"==typeof Object.assign?Object.assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1,r=arguments.length;n<r;){var o=arguments[n];if(null!=o)for(var i in o)R(i,o)&&(e[i]=o[i]);n+=1}return e},W=u(function(t){return Q.apply(null,[{}].concat(t))});const K=t=>t.json().then(e=>({...e,error:t.ok?null:new Error(`Got HTTP error: "${t.status}: ${t.statusText}, cause: "${e.data.message}".`)})),Z=t=>t.children.reduce((t,e)=>e.children?[...t,...Z(e)]:[...t,"measurement"===e.type&&{...e,id:e.name}],[]),V=d((t,e)=>K(e).then(A(T(E("error"),t=>{throw t.error}),e=>A(S({}),q("path",t),q("streams",Z(e.data.metadata)))(e)))),Y=async(t,e)=>Promise.all(t.map(t=>Promise.resolve((t=>({headers:{Accept:"application/json","Content-Type":"application/json","X-Files":t},method:"POST",credentials:"include",body:JSON.stringify({action:"metadata",params:{file:t}})}))(t)).then(t=>fetch(e,t)).then(V(t)))).then(t=>({metadata:t})),tt=t=>K(t).then(A(T(E("error"),t=>{throw t.error}),l(["data","measurements"]),J(A(J(([t,e])=>({x:t,y:"NaN"===e?null:e})))))),et=(t,e)=>Promise.all(t.map(t=>Promise.resolve((t=>{const{file:e,measurements:n,start:r,end:o}=t;return console.log("createDataRequest(",t,",)"),{headers:{Accept:"application/json","Content-Type":"application/json","X-Files":e},method:"POST",credentials:"include",body:JSON.stringify({action:"data",params:{file:e,measurements:n.map(E("name")),offset:r,rows:n[0].resolution,limit:o-r,unit:"MILLI"}})}})(t)).then(t=>fetch(e,t)).then(tt))).then(W);function nt(t){return function e(n){for(var r,o,i,s=[],a=0,u=n.length;a<u;){if(b(n[a]))for(i=0,o=(r=t?e(n[a]):n[a]).length;i<o;)s[s.length]=r[i],i+=1;else s[s.length]=n[a];a+=1}return s}}var rt=u(nt(!0)),ot=c(function(t,e){for(var n={},r=0;r<t.length;)t[r]in e&&(n[t[r]]=e[t[r]]),r+=1;return n}),it=u(function(t){for(var e=G(t),n=e.length,r=[],o=0;o<n;)r[o]=t[e[o]],o+=1;return r}),st=u(function(t){for(var e={},n=0;n<t.length;)e[t[n][0]]=t[n][1],n+=1;return e});const at=new(n(11))({concurrency:1}),ut=t=>{if(!t.ok)throw new Error(`Got HTTP error: "${t.status}: ${t.statusText}"`);return t.json()};var ct=n(0),ht=n.n(ct);const lt=t=>t.endsWith(".sbf")||t.endsWith(".SBF"),ft=t=>{return lt(t)?(async(t,e)=>{const n={headers:{Accept:"application/json","Content-Type":"application/json","X-Files":t.join(",")},method:"POST",credentials:"include",body:JSON.stringify({getMeta:{files:t}})},r=await fetch(e,n);return ut(r)})([t],ht.a.SBF_DATA_ENDPOINT):Y([t],ht.a.DATA_ENDPOINT)},{STAGE_ENDPOINT:pt}=ht.a,dt=0===window.location.search.indexOf("?")?window.location.search.substring(1):window.location.search,vt=s.a.parse(dt),{stage:yt}=vt,mt=o.a.resolve(window.location.href,pt),bt={target:"#root",fetchStage:async()=>fetch(`${mt}?${s.a.stringify({file:yt})}`).then(t=>t.json()),save:()=>Promise.reject(),saveAs:()=>Promise.reject(),saveFragment:()=>Promise.reject(),exportSettings:()=>Promise.reject(),toggleDevTools:()=>Promise.reject(),fetchData:t=>{return t.find(t=>lt(t.file))?((t,e)=>{const n=t.map(({measurements:t,start:e,end:n,...r})=>({...r,start:e,end:n,streams:t.map(t=>({...t,stream:t.name}))})),r={headers:{Accept:"application/json","Content-Type":"application/json","X-Files":t.map(t=>t.sbf).join(",")},credentials:"include",method:"POST",body:JSON.stringify(n.map(t=>({getData:t})))};return at.add(()=>fetch(e,r).then(ut).then(A(J(E("streams")),rt,J(A(ot(["name","data"]),it)),st,J(J(([t,e])=>({x:t,y:e}))))))})(t,ht.a.SBF_DATA_ENDPOINT):et(t,ht.a.DATA_ENDPOINT)},fetchDataMetadata:async t=>{const e=await ft(t);return h({},l(["metadata",0],e))}};document.addEventListener("DOMContentLoaded",()=>{const t={...bt};if(!yt)return t.error="No stage specified.",void marin.StagePlayer(t);marin.StagePlayer(t)})}]);
//# sourceMappingURL=stageplayer-embed.bundle.js.map